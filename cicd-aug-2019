pipeline
{
  agent any
  stages
  {
    stage('checkout scm')
	{
	  steps
	  {
	   git credentialsId: 'github-creds', url: 'https://github.com/sreedevops26/cicd-aug-2019.git'
	  }
	}
	stage('execute dockerfile')
	{ 
	  steps
	  {
	   sh 'docker build -t webbapp:1.0 .'
	  }
	}
	stage('delete container if already exists')
	{
	  steps
	  {
	    sh 'docker rm -f webap'
	  }
	}
	stage('bringup test docker container')
	{
	steps
	{
	sh 'docker run -dti --name webap -p 91:80 webbapp:1.0 /bin/bash'
    }
   }	
  }
 }
  
    